<center>
  <br>
  <%= image_tag("classroom.png", :alt => "classroom") %>
  <h2>Alocador de salas</h2>
</center>
<div class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <h3> Buscar sala disponível </h3>
    <hr>
    <%= form_tag rooms_path, :method => "get" , id: "search-available-rooms-form" do%>

      <%= label_tag(:event_type, "Tipo do Evento") %>
      <%= select_tag(:event_type_id,options_for_select([['Não Repetitivo', 1], ['Repetitivo', 2]]), {class: 'form-control', id: 'event_type_select'}) %>

      <br><br>
      <%= label_tag(:room_type, "Tipo de Sala") %>
      <%= select_tag(:room_type_class, options_for_select(@room_types.invert.to_a), {class: 'form-control'})%>

      <br><br>
      <%= label_tag(:capacity, "Capacidade") %>
      <%= number_field_tag(:capacity, params[:capacity], in: 1..400, step: 1) %>

      <br><br>
      <%= label_tag(:date, "Data do Evento") %>

      <div id="not_repetitive_date" style="display: inline;">
        <%= date_field_tag(:initial_date)%>
        a
        <%= date_field_tag(:end_date)%>
      </div>

      <div id="repetitive_date" style="display: none;">
        <% @days_of_week.each do |id, day| %>
          <%= check_box_tag "days_of_week[]", id %>
          <%= day %>
        <% end%>
      </div>

      <br><br>
      <%= label_tag(:hour, "Hora do Evento") %>
      <%= time_field_tag(:hour)%>

    <div id="search_btn" class="pull-right">
      <%= submit_tag "Buscar", :name => nil, :class => "btn btn-primary"%>
    </div>
  <% end %>
  </div>
</div>
<br>

<script type="text/javascript">
  $("#event_type_select").on("click", function() {
    if($("#event_type_select").val() == 2){
      $("#not_repetitive_date").hide();
      $("#repetitive_date").show();
    }
    else{
      $("#repetitive_date").hide();
      $("#not_repetitive_date").show();
    }
  });
</script>